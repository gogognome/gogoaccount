<project name="Club Finance" default="compile" basedir=".">

	<!-- set global properties for this build -->
	<property name="srcdir" value="src" />
	<property name="testdir" value="test/src" />
	<property name="libdir" value="lib" />
	<property name="resourcedir" value="resources" />
	<property name="generateddir" value="generated" />
	<property name="classdir" value="${generateddir}/classes" />
	<property name="distdir" value="${generateddir}/dist" />
	<property name="mainClass" value="cf.ui.MainFrame" />
	<property name="productname" value="cf" />
	
	<target name="init" description="initialisation used by other targets">
		<!-- Create the time stamp -->
		<tstamp/>
	</target>

	<target name="compile" depends="init"
		description="compiles the application">
		<!-- Create the build directory structure used by compile -->
		<mkdir dir="${classdir}"/>

		<!-- Compile the java code from ${src} into ${build} -->
		<javac srcdir="${srcdir}" classpath="${classpath};${libdir}/gogolib.jar" destdir="${classdir}" source="1.4" target="1.4" debug="true" />
		
		<!-- Compile the java code from ${src} into ${build} -->
		<javac srcdir="${testdir}" classpath="${classpath};${libdir}/gogolib.jar" destdir="${classdir}" source="1.4" target="1.4" debug="true" />
		
		<copy todir="${classdir}">
			<fileset dir="${resourcedir}">
			</fileset>
		</copy>
	</target>

	<target name="dist" depends="compile"
		description="creates a distribution of the project">
		<!-- Create the distribution directory -->
		<mkdir dir="${distdir}"/>

		<!-- Put everything in ${build} into the jar file -->
		<jar jarfile="${distdir}/${productname}.jar" basedir="${classdir}">
			<manifest>
				<attribute name="Main-Class" value="${mainClass}" />
			</manifest>
		</jar>

		<!-- Create a zip file containing all sources, build.xml and the jar file -->
		<zip destfile="${distdir}/${productname}.zip">
			<fileset dir="${distdir}" includes="${productname}.jar" />
			<fileset dir="${libdir}" includes="gogolib.jar" />
			<fileset dir="." includes="${srcdir}/**" />
			<fileset dir="." includes="build.xml" />
        </zip>
	</target>

	<target name="clean"
		description="cleans up the build and distribution directories">
		<!-- Delete the ${build} and ${dist} directory trees -->
		<delete dir="${generateddir}"/>
	</target>

	<target name="run" depends="compile" description="runs the application">
		<java classname="${mainClass}" classpath="${classdir}:${libdir}/gogolib.jar:${classpath}" fork="yes">
			<arg line="-lang=nl" />
		</java>
	</target>

</project>
